# Pyruns â€” Python å®éªŒç®¡ç†ä¸ç›‘æ§ Web UI

**[English](README-en.md) | ç®€ä½“ä¸­æ–‡**

<p align="center">
  <img src="https://img.shields.io/pypi/v/pyruns.svg" alt="PyPI version">
  <img src="https://img.shields.io/pypi/pyversions/pyruns.svg" alt="Python Versions">
  <img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="License">
</p>

<p align="center">
  <b>ğŸ§ª ä¸€ä¸ªæç®€ã€è½»é‡çº§ä¸”å¼ºå¤§çš„ Web UIï¼Œç”¨äºç®¡ç†ã€æ‰¹é‡è¿è¡Œå’Œç›‘æ§ä½ çš„ Python å®éªŒã€‚</b><br>
  <i>æ— éœ€ç¹ççš„é…ç½®ï¼Œå³æ’å³ç”¨ï¼Œä¸“æ³¨ä»£ç æœ¬èº«ï¼Œè®©æœºå™¨å­¦ä¹ å’Œç§‘å­¦è®¡ç®—çš„è°ƒå‚è¿‡ç¨‹ä¼˜é›…è€Œé«˜æ•ˆã€‚</i>
</p>

---

## ğŸŒŸ ä¸ºä»€ä¹ˆé€‰æ‹© Pyrunsï¼Ÿ

åœ¨æœºå™¨å­¦ä¹ å’Œç§‘å­¦è®¡ç®—é¢†åŸŸï¼Œ**è¶…å‚æ•°è°ƒä¼˜**å’Œ**å®éªŒç®¡ç†**å¸¸å¸¸é¢ä¸´ä»¥ä¸‹ç—›ç‚¹ï¼š
- éœ€è¦ç¼–å†™å¤§é‡è„šæœ¬æ¥ç®¡ç†æ‰¹é‡å®éªŒ
- éš¾ä»¥è¿½è¸ªå’Œæ¯”å¯¹åˆ†æ•£åœ¨å„ä¸ªç»ˆç«¯ä¸­çš„æ§åˆ¶å°è¾“å‡º
- å®éªŒè®°å½•ç¼ºä¹ç»“æ„åŒ–ï¼Œéš¾ä»¥å¤ç°æœ€ä½³å‚æ•°ç»„åˆ

**Pyruns æä¾›äº†ä¸€ç§æ›´è½»é‡çº§çš„è§£å†³æ–¹æ¡ˆã€‚** 
å®ƒä¸æ˜¯ä¸€ä¸ªé‡é‡çº§çš„ MLOps å¹³å°ï¼Œè€Œæ˜¯ä¸€ä¸ªä¸“æ³¨äºæœ¬åœ°å®éªŒç®¡ç†çš„ **Task Runner ä¸ Web GUI**ã€‚åŸºäºå¼€ç®±å³ç”¨çš„è®¾è®¡ç†å¿µï¼Œåªè¦æ‚¨çš„è„šæœ¬ä½¿ç”¨äº† `argparse`ï¼ŒPyruns å°±èƒ½æ— ç¼ä¸ºå…¶ç”Ÿæˆäº¤äº’å¼çš„ Web é…ç½®é¡µé¢ï¼Œæ— éœ€ä¿®æ”¹ä»»ä½•ä¸šåŠ¡ä»£ç ã€‚

ğŸ“Œ **æ ¸å¿ƒç‰¹æ€§**
- **ğŸ”Œ é›¶ä»£ç ä¾µå…¥ï¼š** è‡ªåŠ¨è§£æ `argparse` å®šä¹‰ï¼Œæ¸²æŸ“ä¸ºå›¾å½¢åŒ–é…ç½®è¡¨å•ã€‚
- **âš¡ æ‰¹é‡ç”Ÿæˆï¼š** å†…ç½® `|`ï¼ˆç¬›å¡å°”ç§¯ï¼‰ä¸ `(|)`ï¼ˆé…å¯¹ç»„åˆï¼‰è¯­æ³•ï¼Œå¿«é€Ÿç”Ÿæˆå¤§è§„æ¨¡å‚æ•°ç½‘æ ¼ã€‚
- **ğŸš€ å¤šæ ¸å¹¶å‘ï¼š** æä¾›ä»»åŠ¡é˜Ÿåˆ—ä¸å·¥ä½œæ± ï¼ˆæ”¯æŒçº¿ç¨‹/è¿›ç¨‹æ¨¡å¼ï¼‰ï¼Œé«˜æ•ˆè°ƒåº¦å¤šä»»åŠ¡æ‰§è¡Œã€‚
- **ğŸ“Š å®æ—¶ç»ˆç«¯ï¼š** åœ¨æµè§ˆå™¨ä¸­å±•ç¤ºå®Œæ•´çš„ ANSI å½©è‰²æµå¼æ—¥å¿—ã€‚
- **ğŸ“ˆ æŒ‡æ ‡è®°å½•ï¼š** æä¾› `pyruns.add_monitor()` APIï¼Œæç®€è®°å½•å…³é”®æŒ‡æ ‡ï¼Œæ”¯æŒ CSV/JSON æ•°æ®å¯¼å‡ºã€‚

---

## ğŸ“¦ å®‰è£… (Installation)

```bash
pip install pyruns
```

**è¿è¡Œè¦æ±‚:** Python â‰¥ 3.8  
**æ ¸å¿ƒä¾èµ–:** *NiceGUI, PyYAML, psutil*

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Quick Start)

### æ¨¡å¼ 1ï¼šé›¶é…ç½®å¯åŠ¨ï¼ˆæ¨èï¼‰
å®Œå…¨æ— éœ€ä¿®æ”¹ä½ çš„ç°æœ‰ä»£ç ï¼Pyruns å¼€ç®±å³ç”¨ï¼Œç¬é—´ä¸ºæ‚¨åŸºäº `argparse` çš„è„šæœ¬ç”Ÿæˆå‚æ•° UIã€‚

```bash
pyr train.py
```

### æ¨¡å¼ 2ï¼šè‡ªå®šä¹‰ YAML å¯¼å…¥å¯åŠ¨
å¦‚æœä½ æ›´å–œæ¬¢ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¯¼å…¥ YAMLï¼Œä½œä¸ºè¯¥è„šæœ¬çš„é»˜è®¤å‚æ•°åŸºå‡†ï¼š

```bash
pyr train.py my_config.yaml
```

**å‘½ä»¤è¡ŒåŠ©æ‰‹**
```bash
pyr help     # æŸ¥çœ‹æ‰€æœ‰æ”¯æŒçš„ CLI å‘½ä»¤
pyr version  # æ£€æŸ¥å½“å‰ç‰ˆæœ¬
```

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½ä¸ç•Œé¢æ¼”ç¤º

æˆ‘ä»¬åœ¨ `examples/` ç›®å½•ä¸‹ä¸ºæ‚¨å‡†å¤‡äº†ç®€å•æ˜“æ‡‚çš„æ•™ç¨‹ã€‚Pyruns é€šè¿‡ä¸‰ä¸ªæ ¸å¿ƒåœºæ™¯å®Œç¾è¦†ç›–æ‚¨çš„æ•´ä¸ªå®éªŒç”Ÿå‘½å‘¨æœŸï¼š

### 1. Generatorï¼šå‚æ•°é…ç½®ä¸æ‰¹é‡ç”Ÿæˆ

åŠ è½½ `argparse` æˆ– YAML æ¨¡æ¿ï¼Œåœ¨ç»“æ„åŒ–çš„åŠ¨æ€è¡¨å•ä¸­ç¼–è¾‘è¶…å‚æ•°ã€‚ç»“åˆ**æ‰¹é‡ç”Ÿæˆè¯­æ³•**ï¼Œå¯å¿«é€Ÿé…ç½®å¤§å‹å‚æ•°æœç´¢ç½‘æ ¼ã€‚

![Generator UI - å±•ç¤ºå‚æ•°è¡¨å•å’Œæ‰¹é‡è¯­æ³•](docs/assets/multi_gen.png)

> ğŸ’¡ **æç¤º**: è‡ªåŠ¨è§£æ Argparse æ—¶ï¼Œå¦‚æœåŒæ—¶å®šä¹‰äº†çŸ­å‚æ•°å’Œé•¿å‚æ•°ï¼ˆå¦‚ `-b, --batch_size`ï¼‰ï¼ŒPyruns ä¼šä¼˜å…ˆé‡‡ç”¨é•¿å‚æ•°åä½œä¸ºé…ç½®é”®ã€‚

### 2. Managerï¼šä»»åŠ¡æ§åˆ¶å°ä¸å¹¶è¡Œè°ƒåº¦

ä»¥å¯è§†åŒ–çš„å¡ç‰‡ç½‘æ ¼å½¢å¼æµè§ˆå®éªŒä»»åŠ¡ã€‚æä¾›æŒ‰çŠ¶æ€è¿‡æ»¤ã€æŒ‰åç§°æœç´¢ç­‰åŠŸèƒ½ã€‚æ”¯æŒæ‰¹é‡é€‰ä¸­ä»»åŠ¡ï¼Œå¹¶äº¤ç”±åå°è¿›ç¨‹æ± è¿›è¡Œå¹¶è¡Œè°ƒåº¦æ‰§è¡Œã€‚

![Manager UI - å±•ç¤ºä»»åŠ¡ç½‘æ ¼ä¸å¡ç‰‡](docs/assets/tab_manager.png)

ç‚¹å‡»ä»»åŠ¡å¡ç‰‡ï¼Œå¯æŸ¥çœ‹è¯¦ç»†çš„å®éªŒå…ƒæ•°æ®ï¼ˆåŒ…å«ç¯å¢ƒå˜é‡ã€å‚æ•°å¿«ç…§ã€æ‰§è¡Œæ—¥å¿—å’Œå®éªŒç¬”è®°ï¼‰ï¼š

| | |
|:---:|:---:|
| **ä»»åŠ¡ä¿¡æ¯æ€»è§ˆ**<br>![Task Details Info](docs/assets/taskinfo.png) | **é…ç½®å¿«ç…§æŸ¥çœ‹**<br>![Task Details Config](docs/assets/config.png) |
| **å®éªŒç¬”è®°è®°å½•**<br>![Task Details Notes](docs/assets/notes.png) | **ç¯å¢ƒå˜é‡è¯¦æƒ…**<br>![Task Details Env](docs/assets/env.png) |

### 3. Monitorï¼šå®æ—¶ç›‘æ§ä¸æŒ‡æ ‡çœ‹æ¿

ç‚¹å‡»å¤„äº `running` çŠ¶æ€çš„ä»»åŠ¡å¡ï¼Œå¯åœ¨æµè§ˆå™¨å†…å®æ—¶æŸ¥çœ‹ **ANSI å½©è‰²ç»ˆç«¯æ—¥å¿—**ã€‚é¡¶éƒ¨çš„çŠ¶æ€æ æä¾›ç¡¬ä»¶èµ„æºçš„å®æ—¶ç›‘æ§ï¼ˆCPUã€RAMä»¥åŠ GPU åˆ©ç”¨ç‡å’Œæ˜¾å­˜æƒ…å†µï¼‰ã€‚

![Monitor UI - å±•ç¤ºå½©è‰²ç»ˆç«¯å’ŒæŒ‡æ ‡å¯¼å‡º](docs/assets/tab_monitor.png)

**è®°å½•æœ€ç»ˆè¯„ä¼°æŒ‡æ ‡**
å¦‚éœ€è¿½è¸ªå’Œæ¯”å¯¹ä¸åŒä»»åŠ¡çš„æ¨¡å‹æ€§èƒ½æŒ‡æ ‡ï¼Œåªéœ€åœ¨è„šæœ¬æ‰§è¡Œç»“æŸæ—¶æ·»åŠ å¦‚ä¸‹ä»£ç ï¼ˆå®Œæ•´ç¤ºä¾‹è¯·å‚è€ƒ `examples/3_metrics_logging/train.py`ï¼‰ï¼š

```python
last_loss = 0

for epoch in range(1, args.epochs + 1):
    time.sleep(0.5)  # Simulate compute
    loss = 1.0 / (epoch * args.lr * 100)
    last_loss = loss
    print(f"Epoch {epoch}/{args.epochs} - Loss: {loss:.4f}")

pyruns.add_monitor(last_loss=last_loss)
```

![Monitor UI - å±•ç¤ºå½©è‰²ç»ˆç«¯å’ŒæŒ‡æ ‡å¯¼å‡º](docs/assets/export_report.png)

---

## ğŸ“‹ è¿›é˜¶ï¼šæ‰¹é‡ç”Ÿæˆè¯­æ³• (Batch Syntax)

Pyruns åœ¨ Generator é¡µé¢ä¸­æä¾›äº†ä¸€ç§ç®€æ´çš„è¯­æ³•æ¥è¿›è¡Œå‚æ•°ç½‘æ ¼æœç´¢ï¼ˆGrid Searchï¼‰ã€‚

![]()

**ç¬›å¡å°”ç§¯ (Product) `|`**  
å…¨æ’åˆ—ç»„åˆã€‚ä»¥ä¸‹é…ç½®å°†ç”Ÿæˆå‚æ•°çš„ä¸¤ä¸¤ç»„åˆï¼ˆå³ 3 Ã— 2 = 6 ç§é…ç½®ï¼‰ã€‚
```yaml
learning_rate: 0.001 | 0.01 | 0.1
batch_size: 32 | 64
```

**é…å¯¹ç»„åˆ (Zip) `(|)`**  
æŒ‰ä½ç½®ä¸€ä¸€å¯¹åº”ã€‚å¿…é¡»ä¿è¯è¢«æ‹¬å·åŒ…è£¹çš„æ•°ç»„é•¿åº¦ä¸€è‡´ï¼Œè¿™å°†ç²¾ç¡®æŒ‰åºç”Ÿæˆ 3 ç§ç»„åˆã€‚
```yaml
seed: (1 | 2 | 3)
experiment_name: (exp_a | exp_b | exp_c)
```

---

## âš™ï¸ å·¥ä½œåŒºéš”ç¦»ä¸é…ç½® `_pyruns_`

Pyruns é‡‡ç”¨éš”ç¦»çš„æ–‡ä»¶ç®¡ç†ç­–ç•¥ã€‚å½“é¦–æ¬¡æ‰§è¡Œ `pyr train.py` æ—¶ï¼Œå°†åœ¨å½“å‰ç›®å½•åˆ›å»º `_pyruns_` å·¥ä½œåŒºã€‚

UI æ ¸å¿ƒè®¾å®šå‚¨å­˜äºå…¨å±€ `_pyruns_/_pyruns_settings.yaml`ã€‚å®éªŒè®°å½•å°†æ ¹æ®**å…¥å£è„šæœ¬åç§°ç‹¬ç«‹å­˜å‚¨**ï¼ˆä¾‹å¦‚ `_pyruns_/train/...` ä¸ `_pyruns_/test/...` å®Œå…¨éš”ç¦»ï¼‰ï¼Œæœ‰æ•ˆé˜²æ­¢å¤šè„šæœ¬è¿è¡Œæ—¶çš„æ–‡ä»¶è¦†å†™å†²çªã€‚

![]()

ä½ å¯ä»¥è‡ªç”±ä¿®æ”¹å…¨å±€è®¾ç½®ï¼ˆ`_pyruns_/_pyruns_settings.yaml`ï¼‰ä»¥æ·±åº¦å®šåˆ¶ä½ çš„ç•Œé¢äº¤äº’ä¹ æƒ¯ï¼š
```yaml
ui_port: 8099                      # Web UI å¯åŠ¨å ç”¨çš„ç«¯å£å·
generator_form_columns: 2          # Generator å‚æ•°è¡¨å•é»˜è®¤å±•å¼€çš„åˆ—æ•°
manager_max_workers: 4             # Manager å¹¶è¡Œæ‰§åˆ—è¡¨å…è®¸çš„æœ€å¤§è¿›ç¨‹/çº¿ç¨‹æ•°
manager_execution_mode: thread     # æ‰§è¡Œè°ƒåº¦æ¨¡å¼: çº¿ç¨‹ (thread) æˆ– è¿›ç¨‹ (process)
log_enabled: false                 # æ˜¯å¦éœ€è¦é¢å¤–çš„ debug logging è¾“å‡º
```

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£ (Documentation)

æƒ³è¦å‘æ˜ Pyruns çš„å…¨éƒ¨æ½œåŠ›ï¼Ÿè¯·æŸ¥é˜…å®˜æ–¹æ‰‹å†Œï¼š

- ğŸš€ [å®‰è£…ä¸å¿«é€Ÿå¼€å§‹](docs/getting-started.md) â€” 5 åˆ†é’Ÿä¸Šæ‰‹å·¥ä½œæµ
- âš™ï¸ [é…ç½®æ¶æ„è¯¦è§£](docs/configuration.md) â€” å½»åº•ç†è§£ `_pyruns_` ç›®å½•ç»„ç»‡ä¸éš”ç¦»å“²å­¦
- ğŸ§ª [æ‰¹é‡ç”Ÿæˆè¯­æ³•æŒ‡å—](docs/batch-syntax.md) â€” Product / Zip ä»¥åŠ Range è¯­æ³•çš„æ·±åº¦è§£æ
- ğŸ–¥ï¸ [Web ç•Œé¢æ“ä½œæ‰‹å†Œ](docs/ui-guide.md) â€” å‘æ˜ Generator, Manager, å’Œ Monitor éšè—çš„é«˜çº§äº¤äº’
- ğŸ› ï¸ [å¼€å‘è€… API å‚è€ƒ](docs/api-reference.md) â€” é¢å‘é«˜çº§ç”¨æˆ·ï¼šåœ¨ä»£ç æ·±å¤„æ— ç¼é›†æˆ Pyruns
- ğŸ“ [æ¶æ„åŠè®¾è®¡ç†å¿µ](docs/architecture.md) â€” æ¢ç©¶å…¶åº•å±‚è°ƒåº¦é€»è¾‘ï¼ˆä»…ä¾›äºŒæ¬¡å¼€å‘å‚è€ƒï¼‰

---

## ğŸ“„ License
MIT License.
