# Pyruns

**[English](README-en.md) | ç®€ä½“ä¸­æ–‡**

<p align="center">
  <img src="https://img.shields.io/pypi/v/pyruns.svg" alt="PyPI version">
  <img src="https://img.shields.io/pypi/pyversions/pyruns.svg" alt="Python Versions">
  <img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="License">
</p>

<p align="center">
  <b>è½»é‡çº§ Python å®éªŒç®¡ç† Web UI â€”â€” è°ƒå‚ã€æ‰¹é‡è¿è¡Œã€å®æ—¶ç›‘æ§ï¼Œä¸€ç«™å¼è§£å†³ ğŸš€</b>
</p>

Pyruns ä¸ºä½ çš„ Python è„šæœ¬æä¾›ä¸€ä¸ª**å¼€ç®±å³ç”¨**çš„æµè§ˆå™¨ç•Œé¢ï¼šè‡ªåŠ¨è§£æ `argparse` å‚æ•°ç”Ÿæˆå¯è§†åŒ–è¡¨å•ï¼Œé€šè¿‡å†…ç½®è¯­æ³•ä¸€é”®å±•å¼€å‚æ•°ç½‘æ ¼å¹¶æ‰¹é‡ç”Ÿæˆä»»åŠ¡ï¼Œç»Ÿä¸€è°ƒåº¦å¹¶è¡Œæ‰§è¡Œï¼Œåœ¨æµè§ˆå™¨ä¸­å®æ—¶è¿½è¸ª ANSI å½©è‰²æ—¥å¿—ï¼Œæœ€åå¯¼å‡ºè·¨ä»»åŠ¡çš„æŒ‡æ ‡æŠ¥å‘Šã€‚

**ä¸éœ€è¦æ”¹åŠ¨ä»»ä½•ä¸šåŠ¡ä»£ç ã€‚**

```bash
pip install pyruns
pyr train.py          # å°±è¿™ä¸€è¡Œ
```

---

## âœ¨ æ ¸å¿ƒèƒ½åŠ›

| èƒ½åŠ› | è¯´æ˜ |
|------|------|
| ğŸ”Œ **é›¶ä¾µå…¥æ¥å…¥** | è‡ªåŠ¨è§£æ `argparse` å®šä¹‰ï¼Œæ¸²æŸ“ä¸º Web è¡¨å•ã€‚ä¹Ÿæ”¯æŒç›´æ¥å¯¼å…¥ YAML/JSON é…ç½®æ–‡ä»¶ |
| ğŸ§® **æ‰¹é‡å‚æ•°ç½‘æ ¼** | `lr: 0.001 \| 0.01 \| 0.1` ä¸€è¡Œå£°æ˜ï¼Œè‡ªåŠ¨å±•å¼€ç¬›å¡å°”ç§¯æˆ–é…å¯¹ç»„åˆï¼Œç§’çº§ç”Ÿæˆæ•°ç™¾ä»»åŠ¡ |
| âš¡ **å¹¶è¡Œè°ƒåº¦æ‰§è¡Œ** | å†…ç½®ä»»åŠ¡é˜Ÿåˆ— + çº¿ç¨‹/è¿›ç¨‹å·¥ä½œæ± ï¼Œå¯æ§å¹¶å‘æ•°ï¼Œä¸€é”®æ‰¹é‡è¿è¡Œ |
| ğŸ“‹ **ä»»åŠ¡å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†** | å¡ç‰‡å¼çœ‹æ¿ï¼šçŠ¶æ€è¿‡æ»¤ã€æœç´¢ã€ç½®é¡¶ã€ç¬”è®°ã€ç¯å¢ƒå˜é‡ã€å‚æ•°å¿«ç…§ã€è¿è¡Œæ—¥å¿—ï¼Œä¸€ç›®äº†ç„¶ |
| ğŸ–¥ï¸ **å®æ—¶å½©è‰²ç»ˆç«¯** | æµè§ˆå™¨å†…æµå¼æŸ¥çœ‹ ANSI ç€è‰²æ—¥å¿—ï¼ˆå…¼å®¹ `tqdm`ã€`colorama`ï¼‰ï¼Œå¢é‡æ¨é€é›¶å¡é¡¿ |
| ğŸ“Š **æŒ‡æ ‡é‡‡é›†ä¸å¯¼å‡º** | è„šæœ¬ä¸­è°ƒç”¨ `pyruns.add_monitor(loss=0.23)` è®°å½•å…³é”®æŒ‡æ ‡ï¼Œè·¨ä»»åŠ¡èšåˆå¯¼å‡º CSV/JSON æŠ¥å‘Š |
| ğŸ’» **ç³»ç»Ÿèµ„æºé¢æ¿** | é¡¶éƒ¨å®æ—¶æ˜¾ç¤º CPU / RAM / å¤š GPU åˆ©ç”¨ç‡ä¸æ˜¾å­˜ |
| ğŸ“ **å·¥ä½œåŒºéš”ç¦»** | æŒ‰è„šæœ¬åè‡ªåŠ¨éš”ç¦»ï¼ˆ`_pyruns_/train/` vs `_pyruns_/test/`ï¼‰ï¼Œäº’ä¸å¹²æ‰°ï¼Œè½¯åˆ é™¤å¯æ¢å¤ |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ¨¡å¼ 1ï¼šArgparse è„šæœ¬ï¼ˆé›¶é…ç½®ï¼‰

æ— éœ€ä¿®æ”¹ä½ çš„ä»£ç ã€‚Pyruns é€šè¿‡ AST é™æ€åˆ†æè‡ªåŠ¨æå– `argparse` å‚æ•°å¹¶ç”Ÿæˆ UIã€‚

```bash
pyr train.py
```

é¦–æ¬¡è¿è¡Œæ—¶ï¼ŒPyruns ä¼šåœ¨è„šæœ¬åŒçº§ç›®å½•ä¸‹åˆ›å»º `_pyruns_/train/config_default.yaml`ï¼ˆåŒ…å«æ‰€æœ‰å‚æ•°çš„é»˜è®¤å€¼ï¼‰ï¼Œå¹¶å¯åŠ¨ Web UIã€‚

### æ¨¡å¼ 2ï¼šè‡ªå®šä¹‰ YAML é…ç½®

å¯¹äºä½¿ç”¨ `config = pyruns.load()` è¯»å–é…ç½®çš„è„šæœ¬ï¼Œé¦–æ¬¡è¿è¡Œæ—¶ä¼ å…¥ YAML æ–‡ä»¶ï¼š

```bash
pyr train.py my_config.yaml   # â†’ å¤åˆ¶ä¸º _pyruns_/train/config_default.yaml
```

ä¹‹åç›´æ¥è¿è¡Œå³å¯ï¼ŒPyruns è‡ªåŠ¨åŠ è½½å·²ä¿å­˜çš„é…ç½®ï¼š

```bash
pyr train.py                   # â†’ è‡ªåŠ¨è¯»å– _pyruns_/train/config_default.yaml
```

> å†æ¬¡ä¼ å…¥æ–°çš„ YAML ä¼šè¦†ç›–æ—§æ¨¡æ¿ã€‚

```bash
pyr help      # CLI å¸®åŠ©
pyr version   # æŸ¥çœ‹ç‰ˆæœ¬
```

---

## ğŸ¯ åŠŸèƒ½æ¦‚è§ˆ

### ğŸ”§ Generator â€” å‚æ•°é…ç½®ä¸æ‰¹é‡ç”Ÿæˆ

åŠ è½½å‚æ•°æ¨¡æ¿ï¼Œåœ¨ç»“æ„åŒ–è¡¨å•æˆ– YAML ç¼–è¾‘å™¨ä¸­è°ƒæ•´å‚æ•°ã€‚ä½¿ç”¨æ‰¹é‡è¯­æ³•ä¸€æ¬¡æ€§ç”Ÿæˆå‚æ•°æœç´¢ç½‘æ ¼ã€‚

![Generator UI](docs/assets/multi_gen.png)

> è§£æ `argparse` æ—¶ï¼Œè‹¥åŒæ—¶å­˜åœ¨çŸ­å‚æ•°å’Œé•¿å‚æ•°ï¼ˆå¦‚ `-b, --batch_size`ï¼‰ï¼Œè‡ªåŠ¨é‡‡ç”¨é•¿å‚æ•°åä½œä¸ºé…ç½®é”®ã€‚

### ğŸ“¦ Manager â€” ä»»åŠ¡æ§åˆ¶å°

å¡ç‰‡ç½‘æ ¼å±•ç¤ºæ‰€æœ‰ä»»åŠ¡ã€‚æ”¯æŒæŒ‰çŠ¶æ€è¿‡æ»¤ã€æ¨¡ç³Šæœç´¢ã€æ‰¹é‡é€‰ä¸­è¿è¡Œã€‚ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹å®Œæ•´å…ƒæ•°æ®ï¼š

![Manager UI](docs/assets/tab_manager.png)

| | |
|:---:|:---:|
| **ä»»åŠ¡ä¿¡æ¯æ€»è§ˆ**<br>![Task Details Info](docs/assets/taskinfo.png) | **é…ç½®å¿«ç…§æŸ¥çœ‹**<br>![Task Details Config](docs/assets/config.png) |
| **å®éªŒç¬”è®°è®°å½•**<br>![Task Details Notes](docs/assets/notes.png) | **ç¯å¢ƒå˜é‡è¯¦æƒ…**<br>![Task Details Env](docs/assets/env.png) |

### ğŸ“ˆ Monitor â€” å®æ—¶æ—¥å¿—ä¸æŒ‡æ ‡å¯¼å‡º

æµè§ˆå™¨å†…å®æ—¶æµå¼æŸ¥çœ‹ ANSI å½©è‰²ç»ˆç«¯è¾“å‡ºã€‚é¡¶éƒ¨é¢æ¿æŒç»­å±•ç¤º CPU / RAM / GPU èµ„æºçŠ¶æ€ã€‚

![Monitor UI](docs/assets/tab_monitor.png)

åœ¨è„šæœ¬æœ«å°¾è°ƒç”¨ `pyruns.add_monitor()` è®°å½•è¯„ä¼°æŒ‡æ ‡ï¼Œè·¨ä»»åŠ¡èšåˆå¯¼å‡º CSV/JSONï¼š

```python
pyruns.add_monitor(last_loss=last_loss)
```

![Export Report](docs/assets/export_report.png)

---

## ğŸ§ª æ‰¹é‡ç”Ÿæˆè¯­æ³•

åœ¨ Generator é¡µé¢ä¸­ç›´æ¥ä½¿ç”¨ç®¡é“è¯­æ³•è¿›è¡Œå‚æ•°ç½‘æ ¼æœç´¢ã€‚

![]()

**ç¬›å¡å°”ç§¯ `|`** â€” å…¨æ’åˆ—ç»„åˆï¼ˆ3 Ã— 2 = 6 ä¸ªä»»åŠ¡ï¼‰ï¼š
```yaml
learning_rate: 0.001 | 0.01 | 0.1
batch_size: 32 | 64
```

**é…å¯¹ç»„åˆ `(|)`** â€” æŒ‰ä½ç½®ä¸€ä¸€å¯¹åº”ï¼ˆ3 ä¸ªä»»åŠ¡ï¼‰ï¼š
```yaml
seed: (1 | 2 | 3)
experiment_name: (exp_a | exp_b | exp_c)
```

ä¸¤ç§è¯­æ³•å¯æ··åˆä½¿ç”¨ã€‚è¯¦è§ [æ‰¹é‡è¯­æ³•æŒ‡å—](docs/batch-syntax.md)ã€‚

---

## ğŸ“‚ å·¥ä½œåŒºç»“æ„

é¦–æ¬¡è¿è¡Œ `pyr train.py` æ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºä»¥ä¸‹ç»“æ„ï¼š

```text
your_project/
â”œâ”€â”€ train.py
â””â”€â”€ _pyruns_/
    â”œâ”€â”€ _pyruns_settings.yaml      # å…¨å±€è®¾ç½®ï¼ˆç«¯å£ã€å¹¶å‘æ•°ã€æ‰§è¡Œæ¨¡å¼ç­‰ï¼‰
    â””â”€â”€ train/                     # æŒ‰è„šæœ¬åéš”ç¦»
        â”œâ”€â”€ config_default.yaml    # å‚æ•°æ¨¡æ¿ï¼ˆè‡ªåŠ¨ç”Ÿæˆæˆ–å¯¼å…¥ï¼‰
        â””â”€â”€ tasks/
            â”œâ”€â”€ my-exp-[1-of-6]/
            â”‚   â”œâ”€â”€ task_info.json # å…ƒæ•°æ®ï¼ˆçŠ¶æ€ã€æ—¶é—´ã€PIDã€ç¬”è®°ç­‰ï¼‰
            â”‚   â”œâ”€â”€ config.yaml    # æœ¬æ¬¡è¿è¡Œçš„å‚æ•°å¿«ç…§
            â”‚   â””â”€â”€ run_logs/
            â”‚       â””â”€â”€ run1.log   # æ§åˆ¶å°è¾“å‡º
            â””â”€â”€ .trash/            # è½¯åˆ é™¤ï¼ˆå¯æ¢å¤ï¼‰
```

![]()

ä¸åŒè„šæœ¬å®Œå…¨éš”ç¦»ï¼ˆ`_pyruns_/train/` ä¸ `_pyruns_/test/` äº’ä¸å½±å“ï¼‰ã€‚

å¯é€šè¿‡ `_pyruns_settings.yaml` è‡ªå®šä¹‰è®¾ç½®ï¼š

```yaml
ui_port: 8099                      # Web UI ç«¯å£
generator_form_columns: 2          # è¡¨å•åˆ—æ•°
manager_max_workers: 4             # æœ€å¤§å¹¶å‘æ•°
manager_execution_mode: thread     # æ‰§è¡Œæ¨¡å¼: thread | process
log_enabled: false                 # è°ƒè¯•æ—¥å¿—
```

---

## ğŸ“– æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [ğŸ“— å®‰è£…ä¸å¿«é€Ÿå¼€å§‹](docs/getting-started.md) | 5 åˆ†é’Ÿä¸Šæ‰‹å®Œæ•´å·¥ä½œæµ |
| [ğŸ“™ é…ç½®ç³»ç»Ÿ](docs/configuration.md) | `_pyruns_` ç›®å½•ç»“æ„ã€é…ç½®ä¼˜å…ˆçº§ã€ç±»å‹æ¨æ–­ |
| [ğŸ“˜ æ‰¹é‡è¯­æ³•](docs/batch-syntax.md) | ç¬›å¡å°”ç§¯ / é…å¯¹ç»„åˆ / åµŒå¥—å‚æ•°å±•å¼€ |
| [ğŸ“• ç•Œé¢æ“ä½œ](docs/ui-guide.md) | Generatorã€Managerã€Monitor ä¸‰é¡µé¢è¯¦ç»†æ“ä½œ |
| [ğŸ““ API å‚è€ƒ](docs/api-reference.md) | `read()` / `load()` / `add_monitor()` åŠå·¥å…·å‡½æ•° |
| [ğŸ“’ æ¶æ„è®¾è®¡](docs/architecture.md) | ä¸‰å±‚æ¶æ„ã€æ•°æ®æµã€è°ƒåº¦æœºåˆ¶ï¼ˆé¢å‘è´¡çŒ®è€…ï¼‰ |

---

## License

MIT
