# Pyruns â€” Python å®éªŒç®¡ç†ä¸ç›‘æ§ Web UI

**[English](README-en.md) | ç®€ä½“ä¸­æ–‡**

<p align="center">
  <img src="https://img.shields.io/pypi/v/pyruns.svg" alt="PyPI version">
  <img src="https://img.shields.io/pypi/pyversions/pyruns.svg" alt="Python Versions">
  <img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="License">
</p>

<p align="center">
  <b>ğŸ§ª ä¸€ä¸ªæç®€ã€è½»é‡çº§ä¸”å¼ºå¤§çš„ Web UIï¼Œç”¨äºç®¡ç†ã€æ‰¹é‡è¿è¡Œå’Œç›‘æ§ä½ çš„ Python å®éªŒã€‚</b><br>
  <i>æ— éœ€ç¹ççš„é…ç½®ï¼Œå³æ’å³ç”¨ï¼Œè®©æœºå™¨å­¦ä¹ å’Œç§‘å­¦è®¡ç®—çš„è°ƒå‚è¿‡ç¨‹ä¼˜é›…è€Œé«˜æ•ˆã€‚</i>
</p>

<p align="center">
  ![Pyruns Banner - æ•´ä½“é¢„è§ˆå›¾](docs/assets/banner.png)
</p>

---

## ğŸ“¦ å®‰è£…

```bash
pip install pyruns
```

**è¿è¡Œè¦æ±‚:** Python â‰¥ 3.8  
**ä¾èµ–é¡¹:** *NiceGUI, PyYAML, psutil*

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç ï¼Pyruns å¼€ç®±å³ç”¨ï¼Œè‡ªåŠ¨å…¼å®¹ä½ çš„ `argparse` è„šæœ¬ï¼›

æˆ–å¯è‡ªè¡Œå†™ä¸€ä¸ªconfig.yamlå¯¹åº”pyruns.loadæ¥å®ç°åŠ è½½å‚æ•°ã€

### CLI å‘½ä»¤ç”¨æ³•

```bash
# æ¨¡å¼ 1ï¼šé›¶é…ç½®å¯åŠ¨ (è‡ªåŠ¨è§£ææ‚¨çš„ Argparse è„šæœ¬æ„å»º UI)
pyr train.py

# æ¨¡å¼ 2ï¼šå¯¼å…¥è‡ªå®šä¹‰ YAML é…ç½®å¯åŠ¨ (å°† YAML ä½œä¸ºæœ¬è„šæœ¬çš„é…ç½®åŸºç¡€)
pyr train.py my_config.yaml

# è¾…åŠ©å‘½ä»¤
pyr help
pyr version
```

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£ (Documentation)

æƒ³è¦å‘æ˜ Pyruns çš„å…¨éƒ¨æ½œåŠ›ï¼Ÿè¯·æŸ¥é˜…æˆ‘ä»¬çš„å®˜æ–¹æ–‡æ¡£ï¼š

- ğŸš€ [å®‰è£…ä¸å¿«é€Ÿå¼€å§‹](docs/getting-started.md) â€” 5 åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—
- âš™ï¸ [é…ç½®è¯¦è§£](docs/configuration.md) â€” ç†è§£ `_pyruns_` ç»“æ„ä¸å·¥ä½œåŒºè®¾ç½®
- ğŸ§ª [æ‰¹é‡ç”Ÿæˆè¯­æ³•](docs/batch-syntax.md) â€” Product / Zip è¯­æ³•è¯¦è§£
- ğŸ–¥ï¸ [UI æ“ä½œæŒ‡å—](docs/ui-guide.md) â€” æŒæ¡ä¸‰å¤§æ ¸å¿ƒé¡µé¢çš„æ‰€æœ‰ç»†èŠ‚
- ğŸ› ï¸ [API å‚è€ƒ](docs/api-reference.md) â€” åœ¨è„šæœ¬å†…æ·±åº¦é›†æˆ `pyruns`
- ğŸ“ [æ¶æ„è®¾è®¡](docs/architecture.md) â€” äº†è§£åº•å±‚åŸç†ï¼ˆé€‚ç”¨äºå¼€å‘è€…ï¼‰

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½ä¸ç•Œé¢æ¼”ç¤º

æˆ‘ä»¬åœ¨ `examples/` ç›®å½•ä¸‹æä¾›äº†ç®€å•æ˜“æ‡‚çš„æ•™ç¨‹ã€‚Pyruns é€šè¿‡ä¸‰ä¸ªæ ¸å¿ƒé¡µé¢ä¸ºæ‚¨ç®¡ç†å®éªŒç”Ÿå‘½å‘¨æœŸã€‚

### 1. Generator: å‚æ•°é…ç½®ä¸æ‰¹é‡ç”Ÿæˆ

è§£æ YAML é…ç½®æˆ– `argparse`ï¼Œå¹¶åœ¨ç»“æ„åŒ–è¡¨å•ä¸­ä¼˜é›…åœ°ç¼–è¾‘è¶…å‚æ•°ã€‚ä½¿ç”¨å¼ºå¤§çš„**æ‰¹é‡ç”Ÿæˆè¯­æ³•**ç¬é—´åˆ›å»ºæ•°ç™¾ä¸ªå®éªŒé…ç½®ï¼

![Generator UI - å±•ç¤ºå‚æ•°è¡¨å•å’Œæ‰¹é‡è¯­æ³•](docs/assets/æ‰¹é‡ç”Ÿæˆä»»åŠ¡å‚æ•°.png)

**åŸºç¡€ç”¨æ³•ï¼šè‡ªåŠ¨è§£æ Argparseï¼ˆæ— éœ€ä¿®æ”¹ä»£ç ï¼‰**
å‚è€ƒ `examples/1_argparse_script/main.py`ã€‚Pyruns ä¼šè‡ªåŠ¨è¯»å–ä½ çš„ `argparse` å®šä¹‰ï¼Œå¹¶ä¸ºä½ æ„å»º Generator è¡¨å•ç•Œé¢ã€‚
> ğŸ’¡ **æç¤º**: å½“ä½ åŒæ—¶å®šä¹‰äº†çŸ­å‚æ•°å’Œé•¿å‚æ•°ï¼ˆå¦‚ `-b, --batch_size`ï¼‰æ—¶ï¼ŒPyruns ä¼šä¼˜å…ˆä½¿ç”¨é•¿å‚æ•°åä½œä¸ºå˜é‡ï¼

### 2. Manager: ä»»åŠ¡ç½‘æ ¼ä¸å¹¶è¡Œæ§åˆ¶

ä»¥æ¸…æ™°çš„å¡ç‰‡ç½‘æ ¼å½¢å¼å±•ç°æ‰€æœ‰ç”Ÿæˆçš„ä»»åŠ¡ã€‚æŒ‰çŠ¶æ€è¿‡æ»¤ï¼ŒæŒ‰åç§°æœç´¢ï¼Œä¸€é”®é€‰ä¸­ç›®æ ‡ä»»åŠ¡ï¼Œå¹¶åˆ©ç”¨åå°å·¥ä½œè¿›ç¨‹æ± å®ç°**å¤šå®éªŒå¹¶è¡Œè¿è¡Œ**ï¼

![Manager UI - å±•ç¤ºä»»åŠ¡ç½‘æ ¼ä¸å¡ç‰‡](docs/assets/ä»»åŠ¡å¡ç‰‡é¡µé¢3.png)

å¯æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…é…ç½®ï¼š

![Manager UI - å±•ç¤ºä»»åŠ¡è¯¦æƒ…é…ç½®](docs/assets/ä»»åŠ¡è¯¦æƒ…task.png)

![Manager UI - å±•ç¤ºä»»åŠ¡è¯¦æƒ…é…ç½®](docs/assets/ä»»åŠ¡è¯¦æƒ…config.png)

![Manager UI - å±•ç¤ºä»»åŠ¡è¯¦æƒ…é…ç½®](docs/assets/ä»»åŠ¡è¯¦æƒ…notes.png)

![Manager UI - å±•ç¤ºä»»åŠ¡è¯¦æƒ…é…ç½®](docs/assets/ä»»åŠ¡è¯¦æƒ…env.png)

### 3. Monitor: å®æ—¶æ—¥å¿—ä¸æŒ‡æ ‡è®°å½•

ç‚¹å‡»ä»»æ„è¿è¡Œä¸­çš„ä»»åŠ¡ï¼Œå³å¯åœ¨æµè§ˆå™¨ç›´æ¥æŸ¥çœ‹åƒ VSCode ç»ˆç«¯ä¸€æ ·çš„**å®æ—¶ ANSI å½©è‰²æ—¥å¿—**ï¼
æ­¤å¤–ï¼Œåœ¨ä»£ç ä¸­è°ƒç”¨ `pyruns.add_monitor()` å³å¯è®°å½•è®­ç»ƒæŒ‡æ ‡ï¼Œå®éªŒç»“æŸåæ”¯æŒä¸€é”®å¯¼å‡º CSV æŠ¥å‘Šã€‚

![Monitor UI - å±•ç¤ºå½©è‰²ç»ˆç«¯å’ŒæŒ‡æ ‡å¯¼å‡º](docs/assets/æ—¥å¿—ç›‘æµ‹2.png)

**è¿›é˜¶ç”¨æ³•ï¼šè®°å½•ä»»åŠ¡çš„æœ€ç»ˆæŒ‡æ ‡**
å‚è€ƒ `examples/3_metrics_logging/train.py`ã€‚åªéœ€åœ¨è®­ç»ƒç»“æŸåæ·»åŠ ä¸€è¡Œä»£ç ï¼š

```python
import pyruns

# è®­ç»ƒè¿‡ç¨‹...
loss, accuracy = 0.2, 0.95

# è®°å½•å½“å‰è¿è¡Œ(Run)çš„æœ€ç»ˆæŒ‡æ ‡ï¼Œä¾¿äºåœ¨ UI æ‰¹é‡å¯¼å‡º CSV/JSON æŠ¥å‘Š
pyruns.add_monitor(loss=loss, accuracy=accuracy)
```

---

## ğŸ“‹ è¿›é˜¶ï¼šæ‰¹é‡ç”Ÿæˆè¯­æ³•

ä½ å¯ä»¥ç›´æ¥åœ¨ Generator è¡¨å•ä¸­å¿«é€Ÿæ’é˜Ÿæˆç™¾ä¸Šåƒçš„äº¤å‰å®éªŒã€‚

![]()

**ç¬›å¡å°”ç§¯ (Product) `|`**  
ç”Ÿæˆ $3 \times 2 = 6$ ç§ç»„åˆã€‚
```yaml
learning_rate: 0.001 | 0.01 | 0.1
batch_size: 32 | 64
```

**é…å¯¹ç»„åˆ (Zip) `(|)`**  
å¿…é¡»é•¿åº¦ä¸€è‡´ï¼Œè¿™ä¼šç²¾ç¡®ç”Ÿæˆ 3 ç§ç»„åˆã€‚
```yaml
seed: (1 | 2 | 3)
experiment_name: (exp_a | exp_b | exp_c)
```

---

## âš™ï¸ å·¥ä½œåŒºé…ç½® `_pyruns_`

å¯åŠ¨æ—¶ï¼Œ`pyr train.py` ä¼šè‡ªåŠ¨ä¸æ‚¨çš„è„šæœ¬åŒçº§ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `_pyruns_` ç»Ÿä¸€å·¥ä½œåŒºæ–‡ä»¶å¤¹ã€‚
æ‰€æœ‰ UI æ ¸å¿ƒè®¾ç½®å…±äº«äº `_pyruns_/_pyruns_settings.yaml`ï¼Œè€Œæ¯ä¸ªè„šæœ¬éƒ½ä¼šæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„å­å‘½åç©ºé—´ï¼ˆå¦‚ `_pyruns_/train/config_default.yaml` ä¸ `_pyruns_/train/tasks/`ï¼‰ï¼Œå½»åº•æœç»å¤šè„šæœ¬é…ç½®å†²çªï¼

![]()

æ‚¨è¿˜å¯ä»¥é€šè¿‡ CLI æ˜¾å¼å¯¼å…¥è‡ªå·±çš„ YAML ä½œä¸ºåˆå§‹é…ç½®ï¼š
```bash
# è‡ªåŠ¨å¤åˆ¶ my_config.yaml è‡³ _pyruns_/train/config_default.yaml
pyr train.py my_config.yaml
```

æ‚¨å¯ä»¥ç¼–è¾‘è®¾ç½®ï¼ˆ`_pyruns_/_pyruns_settings.yaml`ï¼‰æ¥æ·±åº¦å®šåˆ¶æ‚¨çš„ UI äº¤äº’ä½“éªŒï¼š
```yaml
ui_port: 8099                      # Web UI æœåŠ¡ç«¯å£å·
generator_form_columns: 2          # Generator å‚æ•°è¡¨å•é»˜è®¤åˆ—æ•°
manager_max_workers: 4             # Manager é¡µé¢å¹¶è¡Œæ‰§è¡Œå…è®¸çš„æœ€å¤§ Worker æ•°
manager_execution_mode: thread     # è¿è¡Œæ¨¡å¼: çº¿ç¨‹ (thread) æˆ– è¿›ç¨‹ (process)
log_enabled: false                 # æ˜¯å¦å¯ç”¨æ–‡ä»¶æ—¥å¿—
```

```

---

## ğŸ“„ License
MIT License.
