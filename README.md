# Pyruns â€” Python å®éªŒç®¡ç†ä¸ç›‘æ§ UI

**[English](README-en.md) | ç®€ä½“ä¸­æ–‡**

<p align="center">
  <b>ğŸ§ª ä¸€ä¸ªè½»é‡çº§ Web UIï¼Œç”¨äºç®¡ç†ã€è¿è¡Œå’Œç›‘æ§ Python å®éªŒã€‚</b>
</p>

---

## ğŸ“¦ å®‰è£…

```bash
pip install pyruns
```

**è¿è¡Œè¦æ±‚:** Python â‰¥ 3.8  
**ä¾èµ–é¡¹:** *NiceGUI, PyYAML, psutil*

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç ï¼Pyruns å¼€ç®±å³ç”¨ï¼Œè‡ªåŠ¨å…¼å®¹æ‚¨ç°æœ‰çš„ `argparse` å‘½ä»¤è¡Œå‚æ•°ã€‚åªéœ€åœ¨æ‚¨çš„ Python è„šæœ¬å‰åŠ ä¸Š `pyr` å³å¯å¯åŠ¨å®ƒã€‚

```bash
pyr your_script.py       # å¯åŠ¨ Pyruns Web ç•Œé¢
pyr help                 # æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
```

## âœ¨ æ ¸å¿ƒç•Œé¢ä¸ç¤ºä¾‹æ•™ç¨‹

æˆ‘ä»¬åœ¨ `examples/` ç›®å½•ä¸‹æä¾›äº†ç®€å•æ˜“æ‡‚çš„æ•™ç¨‹ã€‚Pyruns æä¾›ä¸‰ä¸ªæ ¸å¿ƒé¡µé¢æ¥ç®¡ç†æ‚¨çš„ Python å®éªŒç”Ÿå‘½å‘¨æœŸã€‚

### 1. Generator: å‚æ•°é…ç½®ä¸æ‰¹é‡ç”Ÿæˆ
è§£æ YAML é…ç½®æˆ– `argparse`ï¼Œå¹¶åœ¨ç»“æ„åŒ–è¡¨å•ä¸­ç¼–è¾‘è¶…å‚æ•°ã€‚ä½¿ç”¨å¼ºå¤§çš„æ‰¹é‡ç”Ÿæˆè¯­æ³•ç¬é—´åˆ›å»ºæ•°ç™¾ä¸ªå®éªŒé…ç½®ï¼
> **[æ­¤å¤„æ”¾ç½® Generator é¡µé¢æˆªå›¾ - å±•ç¤ºè¡¨å•ä¸æ‰¹é‡ç”Ÿæˆé¢„è§ˆ]**

**åŸºç¡€ç”¨æ³•ï¼šè‡ªåŠ¨è§£æ Argparseï¼ˆæ— éœ€ä¿®æ”¹ä»£ç ï¼‰**
å‚è€ƒ `examples/1_argparse_script/main.py`ã€‚Pyruns ä¼šè‡ªåŠ¨è¯»å–ä½ çš„ `argparse` å®šä¹‰ï¼Œå¹¶ä¸ºä½ æ„å»º Generator è¡¨å•ç•Œé¢ã€‚
> ğŸ’¡ **æç¤º**: å½“ä½ åŒæ—¶å®šä¹‰äº†çŸ­å‚æ•°å’Œé•¿å‚æ•°ï¼ˆå¦‚ `-b, --batch_size`ï¼‰æ—¶ï¼ŒPyruns ä¼šæ™ºèƒ½åœ°ä¼˜å…ˆä½¿ç”¨**é•¿å‚æ•°å**ï¼ˆå³ `batch_size`ï¼‰ä½œä¸ºå˜é‡ï¼
```bash
pyr examples/1_argparse_script/main.py
```

**åŸºç¡€ç”¨æ³•ï¼šè¯»å– Pyruns Config**
å¦‚æœä½ ä¸æƒ³ç”¨å‘½ä»¤è¡Œå‚æ•°ï¼Œä½ å¯ä»¥ç›´æ¥è®©ä½ çš„è„šæœ¬è¯»å– pyruns ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ï¼š
å‚è€ƒ `examples/2_pyruns_config/main.py`ã€‚

```python
import pyruns

# åŠ è½½é…ç½®
config = pyruns.load()
print(f"Loading config items: {config.learning_rate}")
```

### 2. Manager: ä»»åŠ¡ç½‘æ ¼ä¸æ‰¹é‡æ“ä½œ
ä»¥æ¸…æ™°çš„å¡ç‰‡ç½‘æ ¼å½¢å¼å±•ç°æ‰€æœ‰ç”Ÿæˆçš„ä»»åŠ¡ã€‚æŒ‰çŠ¶æ€ï¼ˆQueuedã€Runningã€Failedï¼‰è¿‡æ»¤ï¼ŒæŒ‰åç§°æœç´¢ï¼Œåˆ©ç”¨å¤šä¸ªåå° Worker è¿›ç¨‹å¹¶è¡Œè¿è¡Œå®éªŒï¼  
> **[æ­¤å¤„æ”¾ç½® Manager é¡µé¢æˆªå›¾ - å±•ç¤ºä»»åŠ¡å¡ç‰‡ç½‘æ ¼]**

### 3. Monitor: å®æ—¶æ—¥å¿—ä¸å›¾è¡¨
ç‚¹å‡»ä»»æ„è¿è¡Œä¸­çš„ä»»åŠ¡å³å¯æŸ¥çœ‹å®æ—¶ ANSI å½©è‰²ç»ˆç«¯æ—¥å¿—ã€‚åœ¨ä»£ç ä¸­è°ƒç”¨ `pyruns.add_monitor()`ï¼Œå³å¯åœ¨ UI ä¸­è‡ªåŠ¨ç»˜åˆ¶å®æ—¶è®­ç»ƒæŒ‡æ ‡å›¾è¡¨ã€‚
> **[æ­¤å¤„æ”¾ç½® Monitor é¡µé¢æˆªå›¾ - å±•ç¤ºç»ˆç«¯ä¸æŒ‡æ ‡å›¾è¡¨]**

**è¿›é˜¶ç”¨æ³•ï¼šè®°å½•è®­ç»ƒæŒ‡æ ‡**
å‚è€ƒ `examples/3_metrics_logging/train.py`ã€‚åªéœ€åœ¨ä»£ç ä¸­åŠ ä¸€è¡Œï¼Œå³å¯åœ¨ UI ä¸­è¿½è¸ªæ¨¡å‹æŸå¤± (loss)ã€å‡†ç¡®ç‡ (accuracy) å’Œ epochsï¼

```python
import pyruns

for epoch in range(100):
    loss, accuracy = train_one_epoch()
    
    # å°†å˜é‡ç›´æ¥å‘é€åˆ° Pyruns ç•Œé¢çš„ Monitor å›¾è¡¨ä¸­
    pyruns.add_monitor(epoch=epoch, loss=loss, accuracy=accuracy)
```

---

## ğŸ“‹ æ‰¹é‡ç”Ÿæˆè¯­æ³•

ä½ å¯ä»¥ç›´æ¥åœ¨ Generator è¡¨å•ä¸­å¿«é€Ÿæ’é˜Ÿæˆç™¾ä¸Šåƒçš„äº¤å‰å®éªŒã€‚

**ç¬›å¡å°”ç§¯ (Product) |**
ç”Ÿæˆ $3 \\times 2 = 6$ ç§ç»„åˆã€‚
```yaml
learning_rate: 0.001 | 0.01 | 0.1
batch_size: 32 | 64
```

**é…å¯¹ç»„åˆ (Zip) (|)**
å¿…é¡»é•¿åº¦ä¸€è‡´ï¼Œè¿™ä¼šç²¾ç¡®ç”Ÿæˆ 3 ç§ç»„åˆã€‚
```yaml
seed: (1 | 2 | 3)
experiment_name: (exp_a | exp_b | exp_c)
```

---

## âš™ï¸ å·¥ä½œåŒºé…ç½®

å¯åŠ¨æ—¶ï¼Œ`pyr` ä¼šä¸æ‚¨çš„è„šæœ¬åŒçº§ç›®å½•ä¸‹è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª `_pyruns_` å·¥ä½œåŒºæ–‡ä»¶å¤¹ã€‚
åœ¨é‡Œé¢å¯ä»¥æ‰¾åˆ° `_pyruns_settings.yaml`ã€‚

æ‚¨å¯ä»¥ç¼–è¾‘æ­¤æ–‡ä»¶æ¥ä¿®æ”¹ UI çš„å¸ƒå±€åˆ—æ•°ã€é»˜è®¤ç«¯å£ã€å¹¶è¡Œ Worker æ•°é‡å’Œåˆ·æ–°é¢‘ç‡ç­‰ï¼
```yaml
ui_port: 8080                      # Web UI æœåŠ¡ç«¯å£
generator_form_columns: 2          # Generator è¡¨å•çš„åˆ—æ•°
manager_max_workers: 4             # å¹¶è¡Œè¿è¡Œçš„è„šæœ¬è¿›ç¨‹æ•°é‡
manager_execution_mode: thread     # è¿è¡Œæ¨¡å¼: çº¿ç¨‹ (thread) æˆ– è¿›ç¨‹ (process)
```

---

## ğŸ“„ å¼€æºåè®®
MIT License.
