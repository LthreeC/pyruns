# ðŸ–¥ï¸ UI ç•Œé¢å…¨æ™¯æ“ä½œæŒ‡å—

é€šè¿‡ `pyr train.py` å¯åŠ¨æœåŠ¡åŽï¼Œæ•´ä¸ªåº”ç”¨ç”±é¡¶éƒ¨å…¨å±€æŒ‡æ ‡çœ‹æ¿å’Œä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½é¡µç­¾ç»„æˆã€‚æ— éœ€ç¹é‡çš„å­¦ä¹ ï¼Œæœ¬æŒ‡å—å°†å¸¦ä½ å¿«é€Ÿè§£é”æ‰€æœ‰è¿›é˜¶æ“ä½œã€‚

---

## ðŸ“ˆ é¡¶éƒ¨ç³»ç»Ÿçœ‹æ¿ (Global System Header)

æ— è®ºä½ åœ¨å“ªä¸ªé¡µé¢ï¼Œé¡¶éƒ¨çš„æŽ§åˆ¶å°å§‹ç»ˆå®žæ—¶æ±‡æŠ¥ä½ æœºå™¨çš„å¥åº·çŠ¶å†µï¼ˆæ¯ 3 ç§’åˆ·æ–°ï¼‰ï¼š

```text
[CPU 45%]  [RAM 68%]  [G0 85% 8192/24576M]  [G1 12% 1024/24576M]
```

- **CPU & RAM**: ç‰©ç†æœºçš„æ•´ä½“èµ„æºä½¿ç”¨çŽ‡å¿«ç…§ã€‚
- **GPU (Gn)**: æ™ºèƒ½è¯†åˆ«çŽ¯å¢ƒä¸­çš„æ‰€æœ‰ NVIDIA æ˜¾å¡ã€‚

---

## âš™ï¸ é¡µé¢ä¸€ï¼šGenerator (é…ç½®ç”Ÿæˆå™¨)

**æ ¸å¿ƒåŠŸèƒ½ï¼šåœ¨æ­¤é¡µé¢é…ç½®å‚æ•°å¹¶ç”Ÿæˆæ‰¹é‡ä»»åŠ¡ã€‚**

![Generator é¡µé¢æ¦‚è§ˆ](assets/tab_generator.png)

### 1. ç»“æž„åŒ–è¡¨å• vs. æºç ç¼–è¾‘

åœ¨å·¦ä¾§ `Template` ä¸‹æ‹‰æ¡†é€‰ä¸­åŸºç¡€é…ç½®åŽï¼Œä½ å¯ä»¥éšæ„æ¨ªè·³äºŽä¸¤ç§ç¼–è¾‘æ¨¡å¼ï¼š

- ðŸ“ **Form è§†å›¾ï¼ˆå›¾å½¢åŒ–ç¼–è¾‘ï¼‰**
  - **åŠ¨æ€æŽ’ç‰ˆ**ï¼šæ”¯æŒæŒ‰éœ€è°ƒæ•´ 1~9 åˆ—çš„è¡¨å•æµå¼å¸ƒå±€ï¼Œç´§å‡‘çš„ç©ºé—´åˆ©ç”¨çŽ‡ã€‚
  - **åµŒå¥—æŠ˜å **ï¼šå­—å…¸ç±»åž‹çš„é…ç½®ä¼šè‡ªåŠ¨å±•ç¤ºä¸ºå¯æŠ˜å é¢æ¿ï¼Œä¾¿äºŽç®¡ç†å¤æ‚åµŒå¥—å‚æ•°ã€‚
  - **å›¾é’‰**ï¼šé’ˆå¯¹é«˜é¢‘ä¿®æ”¹çš„è¶…å‚æ•°ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ `pin` å³å¯ç½®é¡¶æ˜¾ç¤ºã€‚

- ðŸ“œ **YAML è§†å›¾ï¼ˆæºç çº§æŽ§åˆ¶ï¼‰**
  - å†…ç½®åŸºäºŽ CodeMirror çš„é«˜äº®ç¼–è¾‘å™¨ã€‚
  - å¯¹äºŽæžå…¶å¤æ‚çš„ä¿®æ”¹ï¼ˆæˆ–ç²˜è´´å¤–éƒ¨é…ç½®ï¼‰ï¼Œä½ å¯ä»¥ç›´æŽ¥æ‰‹å†™åŽŸç”Ÿ YAMLã€‚

### 2. æ‰¹é‡ç”Ÿæˆè¯­æ³•

ç›´æŽ¥åœ¨ç¼–è¾‘æ¡†å†…ä½¿ç”¨ç‰¹å®šè¯­æ³•ï¼Œå³å¯å¿«é€Ÿå®žçŽ°å¤§æ‰¹é‡çš„ç½‘æ ¼æœç´¢é…ç½®ï¼ˆè¯¦æƒ…å‚é˜… [æ‰¹é‡è¯­æ³•ç« èŠ‚](batch-syntax.md)ï¼‰ã€‚

- **æŽ’åˆ—ç»„åˆ (Product)** ä½¿ç”¨ `|`
  - ç¤ºä¾‹: `batch_size`: `32 | 64 | 128` è‡ªåŠ¨æ´¾ç”Ÿ 3 ä¸ªç‹¬ç«‹ä»»åŠ¡
- **å…³è”æ‰“åŒ… (Zip)** ä½¿ç”¨ `(|)`
  - ç¤ºä¾‹: `model_name`: `(ResNet | VGG)` ä¸Ž `lr`: `(0.1 | 0.01)` é…å¯¹ç»„åˆï¼Œæ´¾ç”Ÿ 2 ä¸ªä»»åŠ¡

é…ç½®å®ŒæˆåŽï¼Œè¾“å…¥åŸºç¡€ä»»åŠ¡åç§°å‰ç¼€ï¼Œç‚¹å‡»åº•éƒ¨ **GENERATE** æŒ‰é’®ï¼Œç³»ç»Ÿå³ä¼šä¸ºæ‚¨åœ¨åŽå°æ‰¹é‡ç”Ÿæˆç›¸åº”çš„ä»»åŠ¡è®°å½•ã€‚

---

## ðŸ—‚ï¸ é¡µé¢äºŒï¼šManager (ä»»åŠ¡æ€»æŽ§å°)

**æ ¸å¿ƒåŠŸèƒ½ï¼šä»¥ç›´è§‚çš„å¡ç‰‡ç½‘æ ¼å½¢å¼ç®¡ç†ã€ç­›é€‰å¹¶æ‰¹é‡è¿è¡Œå®žéªŒä»»åŠ¡ã€‚**

![Manager é¡µé¢æ¦‚è§ˆ](assets/tab_manager.png)

### 1. ä»»åŠ¡åˆ—è¡¨ä¸Žè¿‡æ»¤æŸ¥è¯¢

æœ¬åŒºåŸŸé›†ä¸­å±•ç¤ºäº†å½“å‰è„šæœ¬ç©ºé—´å†…çš„æ‰€æœ‰ä»»åŠ¡ã€‚

- **çŠ¶æ€è¿‡æ»¤**ï¼šé€šè¿‡é¡¶æ çŠ¶æ€æŒ‰é’®å¿«é€Ÿç­›é€‰ `Pending` (å¾…è¿è¡Œ), `Running` (è¿è¡Œä¸­), `Completed` (å·²å®Œæˆ) æˆ– `Failed` (å¤±è´¥)ã€‚
- **æ¨¡ç³Šæœç´¢**ï¼šæ”¯æŒæ ¹æ®ä»»åŠ¡åç§°å…³é”®å­—æ£€ç´¢ã€‚
- **è‡ªå®šä¹‰è§†å›¾**ï¼šå¯è‡ªç”±è°ƒèŠ‚å¡ç‰‡æµçš„å±•ç¤ºåˆ—æ•°ï¼ˆæ”¯æŒ 1-9 åˆ—ï¼‰ã€‚

### 2. å¹¶å‘æ‰§è¡Œä¸Žæ¨¡å¼é€‰æ‹©

Manager é¡µé¢çš„å³ä¸Šè§’æä¾›äº†å¯¹å¹¶å‘æ‰§è¡Œçš„ç²¾ç»†æŽ§åˆ¶ï¼š

- **Workers (æœ€å¤§å¹¶å‘æ•°)**ï¼šæŒ‡å®šå…è®¸åŒæ—¶æ‰§è¡Œçš„è„šæœ¬å®žä¾‹æœ€å¤§æ•°é‡ã€‚
- **Execution Mode (æ‰§è¡Œæ¨¡å¼)**:
  - `Thread`ï¼ˆå¤šçº¿ç¨‹æ¨¡å¼ï¼‰ï¼šé€‚ç”¨äºŽéœ€è¦å…±äº«çˆ¶è¿›ç¨‹ç©ºé—´æˆ–èµ„æºæ¶ˆè€—è¾ƒå°çš„è„šæœ¬ï¼Œæ˜¯é»˜è®¤æŽ¨èé€‰é¡¹ã€‚
  - `Process`ï¼ˆå¤šè¿›ç¨‹æ¨¡å¼ï¼‰ï¼šè¿›ç¨‹çº§åˆ«éš”ç¦»ï¼Œé€‚ç”¨äºŽ CPU å¯†é›†åž‹æˆ–é‡åˆ° Python GIL ç“¶é¢ˆçš„ä»»åŠ¡ã€‚

åœ¨åˆ—è¡¨ä¸­æ‰¹é‡é€‰ä¸­ä»»åŠ¡åŽï¼Œç‚¹å‡» **RUN SELECTED** æŒ‰é’®å³å¯è°ƒåº¦æ‰§è¡Œã€‚

### 3. ä»»åŠ¡è¯¦ç»†ä¿¡æ¯ (Task Details Dialog)

ç‚¹å‡»ä»»æ„çŠ¶æ€çš„ä»»åŠ¡å¡ç‰‡ï¼Œå°†å¼¹å‡ºæŸ¥çœ‹è¯¦æƒ…çš„å¯¹è¯çª—å£ï¼ˆæ”¯æŒé¼ æ ‡æ‹–æ‹½ï¼‰ï¼š

| æ ‡ç­¾é¡µ | è¯´æ˜Ž |
|--------|----------|
| **Task Info** | `task_info.json` çš„åªè¯»è§†å›¾ã€‚åŒ…å«ä»»åŠ¡åˆ›å»ºæ—¶é—´ã€æ‰§è¡Œè€—æ—¶ã€PID åŠåŽ†å²é‡è·‘ (Rerun) æ¬¡æ•°ã€‚ |
| **Config** | `config.yaml` çš„åªè¯»è§†å›¾ã€‚å±•ç¤ºè¯¥ä»»åŠ¡å¯åŠ¨æ—¶è¢«æ³¨å…¥çš„å…·ä½“å‚æ•°é…ç½®ã€‚ |
| **Run Log** | ç»ˆç«¯è¾“å‡ºé˜…è¯»å™¨ã€‚å¯é€‰æ‹©æŸ¥çœ‹å½“å‰æˆ–è¿‡å¾€æ‰§è¡Œçš„æ—¥å¿—ï¼ˆå¦‚ `run.log`, `rerun1.log` ç­‰ï¼‰ã€‚ |
| **Notes** | å¯Œæ–‡æœ¬ä¾¿ç¬ºï¼Œæ”¯æŒéšæ—¶ä¿å­˜å¯¹è¯¥æ¬¡å®žéªŒçš„è‡ªå®šä¹‰å¤‡æ³¨ã€‚ |
| **Env Vars** | ä»»åŠ¡å¯åŠ¨çž¬é—´æ‰€æ•èŽ·çš„ç³»ç»ŸçŽ¯å¢ƒå˜é‡ï¼Œä¾¿äºŽè¿½æº¯åº•å±‚è¿è¡ŒçŽ¯å¢ƒã€‚ |

---

## ðŸ“Š é¡µé¢ä¸‰ï¼šMonitor (æ—¥å¿—è¿½è¸ªä¸ŽæŠ¥è¡¨)

**æ ¸å¿ƒåŠŸèƒ½ï¼šä»¥æµå¼ç»ˆç«¯ç•Œé¢ç›‘æŽ§è¾“å‡ºï¼Œå¹¶æä¾›ç»Ÿä¸€çš„è¯„ä¼°æŒ‡æ ‡å¯¼å‡ºã€‚**

![Monitor é¡µé¢æ¦‚è§ˆ](assets/tab_monitor.png)

### 1. æµå¼ç»ˆç«¯ (Streaming Terminal Log)

å¯¹æ­£åœ¨æ‰§è¡Œ (`Running`) çš„ä»»åŠ¡ï¼ŒMonitor æä¾›å®žæ—¶çš„è·Ÿè¸ªè§†å›¾ï¼š

- **ANSI é¢œè‰²æ”¯æŒ**ï¼šå®Œç¾Žæ”¯æŒ `tqdm` ç­‰è¿›åº¦æ¡ä¸Ž `colorama` è‰²å½©çš„ç½‘é¡µè§£æžæ¸²æŸ“ã€‚
- **æ— æ„Ÿå¢žé‡æŠ“å–**ï¼šåŸºäºŽåç§»é‡ï¼ˆoffsetï¼‰å¯¹æ—¥å¿—æ–‡ä»¶è¿›è¡Œå—çº§å¢žé‡è¯»å–ï¼ˆread chunkï¼‰ï¼Œé¿å…åå¤æ‹‰å–å¤§æ–‡ä»¶çš„ç½‘ç»œå µå¡žã€‚
- **Auto-Scroll åŠŸèƒ½**ï¼šå¼€å¯åŽï¼Œç»ˆç«¯å†…å®¹å°†è‡ªåŠ¨è¿½è¸ªè‡³æœ€æ–°çš„è¾“å‡ºè¡Œã€‚

### 2. å¯¼å‡ºæŠ¥å‘Š (Export Reports)

è¿˜è®°å¾— `pyruns.add_monitor()` å—ï¼Ÿå¦‚æžœä½ åœ¨ä»£ç ç»ˆç‚¹æ‰“ä¸‹äº†è¿™ä¸ªæ¡©ï¼š

```python
pyruns.add_monitor(loss=curr_loss, auc=curr_auc)
```

1. åœ¨ Monitor é¡µé¢å·¦ä¾§å‹¾é€‰ç›¸åº”çš„åŽ†å²å®žéªŒã€‚
2. ç‚¹å‡»é¡µé¢ä¸‹æ–¹çš„ **Export Reports** æŒ‰é’®ã€‚
3. å¯é€‰æ‹©å¯¼å‡ºä¸º **CSV æˆ– JSON** æ ¼å¼çš„æ±‡æ€»æŠ¥è¡¨ï¼Œç”¨äºŽäºŒæ¬¡åˆ†æžæˆ–ä½œå›¾å±•ç¤ºã€‚

---

## âŒ¨ï¸ è¿›é˜¶åŠŸèƒ½ä¸ŽçŠ¶æ€è¯´æ˜Ž

- **è½¯åˆ é™¤è®¾è®¡ (`.trash`)**
  åœ¨ç•Œé¢ä¸­æ‰§è¡Œçš„ä»»åŠ¡åˆ é™¤æ“ä½œä¸ºè½¯åˆ é™¤ã€‚è¢«å‰”é™¤çš„ä»»åŠ¡æ–‡ä»¶å¤¹ä¼šè¢«ç§»åŠ¨è‡³å·¥ä½œåŒºæ ¹ç›®å½•ä¸‹çš„ `.trash/` æ–‡ä»¶å¤¹ä¸­ï¼Œæ”¯æŒäººå·¥åŽæœŸæ‰‹åŠ¨å®¡æŸ¥æˆ–æ¢å¤ã€‚

- **ä»»åŠ¡è¿è¡ŒçŠ¶æ€æµè½¬**
  - ç°è‰² â° `Pending`ï¼šç­‰å¾…è¢«æ“ä½œè°ƒåº¦
  - è“è‰² â³ `Queued`ï¼šå·²åŠ å…¥ Workers æ± ï¼Œç­‰å¾…ç³»ç»Ÿèµ„æºåˆ†é…
  - ç¥ç€è‰² â–¶ `Running`ï¼šå­è¿›ç¨‹æ­£åœ¨æ‰§è¡Œ
  - ç»¿è‰² âœ“ `Completed`ï¼šæ‰§è¡Œç»“æŸå¹¶æˆåŠŸé€€å‡ºï¼ˆExit Code: 0ï¼‰
  - çº¢è‰² âœ— `Failed`ï¼šæ‰§è¡Œè¿‡ç¨‹å‡ºçŽ°å¼‚å¸¸æˆ–æŠ¥é”™å´©æºƒï¼ˆExit Code: >0ï¼‰

